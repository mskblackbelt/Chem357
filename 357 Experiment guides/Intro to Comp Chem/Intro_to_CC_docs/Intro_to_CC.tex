% Tutorial prepared by Igor Y. Zhang, Hagen-Henrik Kowalski and Tonghao Shen 2017.
% Updated 2017
% \documentclass[10pt]{scrartcl}
\documentclass[nobib,nofonts,nols,nohyper]{tufte-handout}
\input{header.tex}
\usepackage[mackeys=text]{menukeys}

\sisetup{binary-units = true}
  \DeclareSIUnit\kcal{kcal}
  \DeclareSIUnit\wn{\raiseto{-1}\cm}
  \DeclareSIUnit\hartree{Ha}

%%%%%%% Bibliography options %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \usepackage[%
%   bibstyle=numeric,%
%   citestyle=numeric-comp,%
%   sortcites,%
%   sorting=none,%
%   defernumbers=true%
%   ]{biblatex}
%   \addbibresource{../pchem_bib.bib}
%
% %% TODO: Troubleshoot this section… useful to only maintain one bibliography.
%   % Filter bibliography file to only include entries matching keyword.
%   \DeclareSourcemap{
%     \maps[datatype=bibtex]{
%       \map{
%         \step[nocited, final]
%         \step[fieldsource=keywords, notmatch=data, final]
%         \step[entrynull]
%       }
%     }
%   }
%
%   % Add a section for cited bibliography entries. At the end,
%   % create a second bibliography for uncited items.
%   \DeclareBibliographyCategory{cited}
%   \AtEveryCitekey{\addtocategory{cited}{\thefield{entrykey}}}
%   % Remove URL from citations if DOI is present.
%   \AtEveryBibitem{%
%     \iffieldundef{doi}{
%     % do nothing if true
%     }
%     { % otherwise, clear the URL
%       \clearfield{url}
%     }%
%   }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \usepackage[%
% pdftitle={Hands-on Workshop: First-principles simulations of molecules and materials},%
%   pdfauthor={Igor Y. Zhang, Hagen-Henrik Kowalski and Tonghao Shen},
%   pdfsubject={Hands-on Workshop: First-principles simulations of molecules and materials},
%   bookmarks=true,
%   bookmarksdepth=2,
%   linkcolor=DarkBlue,
%   citecolor=DarkBlue,
%   filecolor=DarkBlue,
%   urlcolor=DarkBlue,
%  %hidelinks=true,
%   colorlinks=true
% ]{hyperref}

%%%%%%% Source Code options %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Command to insert PROMPT info before shell console input
\newcommand{\BashFancyFormatLine}{%
  \def\FancyVerbFormatLine##1{\textcolor{blue}{\small user:\char`\~\$}\ ##1}%
}

\tcbuselibrary{listings} % Use listings library for dummy Gaussian input files.
	\lstset{morecomment=[s]{<}{>}} % Set comment style for dummy Gaussian input
\tcbset{
  colback=blue!4!white,
  colframe=blue!85!black,
  listing only,
  left=1.5em,
  enhanced jigsaw,
  breakable,
  overlay={
    \begin{tcbclipinterior}
      \fill[red!20!blue!20!white] 
      (frame.south west)  rectangle 
      ([xshift=1.5em]frame.north west);
    \end{tcbclipinterior}}
}
\setminted{
  style=tango,
  fontsize=\small,
  breaklines,
  breakafter=|,
  autogobble,
  linenos,
  numberfirstline=true,
  firstnumber=1,
  stepnumber=2,
  numbersep=1em
}

\lstset{
  breaklines=true,
  basicstyle=\small,
  numberstyle=\tiny,
  numbers=left,
  numberfirstline=true,
  firstnumber=1,
  stepnumber=2,
  numbersep=2em,
}

\lstdefinestyle{gaussian}{
  language=Clean,
  % keywordstyle=\bfseries,
  commentstyle=\slshape,
  % stringstyle=\ttfamily,
  numbers=left,
  firstnumber=1,
  stepnumber=2,
  numberfirstline=true,
  numbersep=2em,
  numberstyle=\tiny,
  breaklines=true,
  breakautoindent=true,
  tabsize=2,
  basicstyle=\ttfamily\small,
  showspaces=false,
  showstringspaces=false,
  morecomment=[s]{<}{>}
}

\newmintinline{bash}{}

% Hack to force linebreaks at `¬` in bashinputs. From
% https://tex.stackexchange.com/a/461455/27032
\AtBeginEnvironment{bashinput}{%
  \catcode`¬\active
  \begingroup\lccode`~=`\¬\lowercase{\endgroup\def~{\linebreak}}%
}

\newtcblisting{bashinput}[1][]{
  listing engine=minted,
  minted language=bash, 
  listing only,
  minted options={,
    formatcom=\BashFancyFormatLine
  },
  #1
}

\newtcblisting{gaussinput}[1][]{
	listing engine=listings,
	listing only,
  listing options={
    style=gaussian
    },
  #1
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

% --------------------------------------------------------------------

\thispagestyle{empty}
\begin{fullwidth}
  \begin{center}\huge\bfseries
    \rule{1.5\textwidth}{1pt}
    \\
    PChem Lab 357: Spring 2019 
    \\
    \vspace{0.5cm}
    \rule{1.5\textwidth}{1pt}
  \end{center}
  \vfill
  \begin{center}\LARGE\bfseries
    % \includegraphics[width=0.5\textwidth]{figures/aims-logo-gross}
    \includegraphics[height=7.55cm]{pics/cover.png}
    \vfill
    Excercise 5: Introduction to Computational Chemistry\\ 
    Excersise Problems for Gaussian16
  \end{center}
  \vfill
  \begin{center}\large\bfseries
    \rule{1.5\textwidth}{1pt}
    \vfill
    Adopted from Hands-On Workshop on Density-functional theory and beyond organized by FHI der MPG, Berlin.  \\
    Adopted for G16 by Mateusz Marianski, NYC, Feb 2019 \\ 
    Written fom FHI-aims code by Igor Y. Zhang et al.%, Hagen-Henrik Kowalski and Tonghao Shen\\
  \end{center}
\end{fullwidth}

\clearpage

% --------------------------------------------------------------------

\include{Intro}
\include{bash}
%\include{vi}
\include{part_1}
\include{part_2}
%\include{part_3}
\clearpage

\appendix
%\include{appendix}

\vfill

%\section*{Acknowledgments}

%1\newcommand\bibbegin{\RaggedRight}
%\bibliography{Tutorial1-Basics}
%\bibliographystyle{doi_style}
% ----------------------------------------------------------------------

\end{document}
